<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công cụ tra cứu điểm thi THPT</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="auth.js"></script>
    <script>
        protectPage();
    </script>
</head>
<body class="dashboard-page">
    <div class="score-lookup-container">
        <header class="dashboard-header">
            <h1><i class="fas fa-search-plus"></i> Công cụ tra cứu điểm thi THPT</h1>
            <p>Nhập danh sách số báo danh để tra cứu hàng loạt.</p>
            <a href="index.html" class="button-link-back">
                <i class="fas fa-arrow-left"></i> Quay lại trang chính
            </a>
        </header>

        <!-- KHUNG NHẬP LIỆU -->
        <div class="input-card">
            <div class="api-selection-container">
                <label for="api-select">Chọn nguồn tra cứu (Nếu lỗi sẽ tự động chuyển):</label>
                <select id="api-select">
                    <option value="dantri" selected>Nguồn 1 (Dân Trí)</option>
                    <option value="tuoitre">Nguồn 2 (Tuổi Trẻ)</option>
                    <option value="viettimes">Nguồn 3 (VietTimes)</option>
                </select>
            </div>
            <label for="sbd-textarea">Nhập SBD (mỗi SBD một dòng):</label>
            <textarea id="sbd-textarea" placeholder="Ví dụ:&#10;02000001&#10;02000002&#10;..."></textarea>
            <button id="lookup-button" class="action-button">
                <i class="fas fa-rocket"></i> Tra cứu
            </button>
            <div class="progress-container">
                <progress id="lookup-progress" value="0" max="100"></progress>
                <span id="progress-text"></span>
            </div>
        </div>

        <!-- KHUNG LOG -->
        <div class="log-card">
            <h3><i class="fas fa-history"></i> Nhật ký tra cứu</h3>
            <div id="log-container" class="log-container">
                <p class="placeholder-text">Nhật ký sẽ xuất hiện ở đây...</p>
            </div>
        </div>

        <!-- KHUNG KẾT QUẢ -->
        <div class="results-card">
            <!-- ▼▼▼ CẬP NHẬT Ở ĐÂY ▼▼▼ -->
            <div class="card-header">
                <h3>Kết quả tra cứu</h3>
                <button id="export-results-btn" class="action-button export-btn" style="display: none;">
                    <i class="fas fa-file-csv"></i> Xuất CSV
                </button>
            </div>
            <div class="table-responsive-container" id="results-table-container">
                <p class="placeholder-text">Bảng kết quả sẽ được hiển thị ở đây sau khi tra cứu...</p>
            </div>
        </div>
    </div>

    <script src="ui_helpers.js"></script>
    <script src="diem_app.js"></script>
</body>
</html>
